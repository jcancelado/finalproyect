{% extends 'base.html' %}
{% block content %}
  <div style="padding: 2rem;">
    <h1>üì¶ Inventario</h1>
    <p style="color: #666;">Tienda: <strong>{{ local_id }}</strong></p>
    
    <a href="{{ url_for('tendero_create_producto', local_id=local_id) }}" style="
      display: inline-block;
      padding: 0.75rem 1.5rem;
      background-color: var(--accent);
      color: white;
      text-decoration: none;
      border-radius: 5px;
      margin-bottom: 1.5rem;
      font-weight: 600;
    ">‚ûï Agregar Producto</a>
    
    {% if productos %}
      <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 1.5rem; margin-top: 1rem;">
        {% for producto_id, producto_data in productos.items() %}
          <div class="card" style="display: flex; flex-direction: column;">
            <!-- Imagen del producto -->
            {% if producto_data.get('imagen_url') %}
              <img src="{{ producto_data.get('imagen_url') }}" alt="{{ producto_data.get('nombre') }}" 
                   style="width: 100%; height: 180px; object-fit: cover; border-radius: 5px; margin-bottom: 1rem;">
            {% else %}
              <div style="width: 100%; height: 180px; background-color: #f5f5f5; border-radius: 5px; display: flex; align-items: center; justify-content: center; margin-bottom: 1rem; color: #999;">
                üì¶ Sin imagen
              </div>
            {% endif %}
            
            <!-- Informaci√≥n del producto -->
            <h3 style="margin: 0 0 0.5rem 0;">{{ producto_data.get('nombre', 'Sin nombre') }}</h3>
            
            <div style="margin-bottom: 1rem;">
              <p style="margin: 0.5rem 0; font-size: 0.9rem; color: #666;">
                <strong>Precio:</strong> ${{ producto_data.get('precio', 0) }}
              </p>
              <p style="margin: 0.5rem 0; font-size: 0.9rem; color: #666;">
                <strong>Stock:</strong> {{ producto_data.get('stock', 0) }} unidades
              </p>
              {% if producto_data.get('proveedor') %}
                <p style="margin: 0.5rem 0; font-size: 0.9rem; color: #666;">
                  <strong>Proveedor:</strong> {{ producto_data.get('proveedor') }}
                </p>
              {% endif %}
            </div>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 0.5rem; margin-top: auto;">
              <a href="{{ url_for('tendero_editar_producto', local_id=local_id, producto_id=producto_id) }}" style="padding: 0.5rem; background-color: #5cb85c; color: white; border: none; border-radius: 3px; cursor: pointer; font-size: 0.85rem; text-decoration: none; display: block; text-align: center;">‚úèÔ∏è Editar</a>
              <form method="POST" action="{{ url_for('tendero_eliminar_producto', local_id=local_id, producto_id=producto_id) }}" style="display: contents;" onsubmit="return confirm('¬øEliminar producto?');">
                <button type="submit" style="padding: 0.5rem; background-color: #d9534f; color: white; border: none; border-radius: 3px; cursor: pointer; font-size: 0.85rem;">üóëÔ∏è Eliminar</button>
              </form>
            </div>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <div style="text-align: center; padding: 2rem; color: #666;">
        <p>No hay productos. <a href="{{ url_for('tendero_create_producto', local_id=local_id) }}" style="color: var(--accent); text-decoration: none; font-weight: 600;">Agrega uno</a></p>
      </div>
    {% endif %}
    
    <hr style="margin: 2rem 0;">
    <div style="text-align: center;">
      <a href="{{ url_for('tendero_locales') }}" style="color: var(--accent); text-decoration: none;">‚Üê Volver a mis tiendas</a>
    </div>
  </div>
{% endblock %}
